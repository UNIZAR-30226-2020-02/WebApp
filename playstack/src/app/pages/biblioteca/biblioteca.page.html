<ion-header>
  <ion-toolbar>
    <ion-title>Biblioteca</ion-title>
  </ion-toolbar>
</ion-header>


<ion-content>


  <ion-toolbar>
    <ion-segment color="light" [value]="currentTab">
      <ion-segment-button value="Musica" (click)="setMusic()">
        Música
      </ion-segment-button>
      <ion-segment-button value="Podcasts" (click)="setPodcasts()">
        Podcasts
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>

  <ion-content *ngIf="currentTab == 'Musica'">
    <ion-toolbar>
      <ion-segment color="light" [value]="currentTabMusica">
        <ion-segment-button value="Playlists" (click)="setPlaylists()">
          Playlists
        </ion-segment-button>
        <ion-segment-button value="Artistas" (click)="setArtistas()">
          Artistas
        </ion-segment-button>
        <ion-segment-button value="Albumes" (click)="setAlbumes()">
          Álbumes
        </ion-segment-button>
      </ion-segment>
    </ion-toolbar>



    <!-- Pestañas música -->

    <ion-item-group *ngIf="currentTabMusica == 'Playlists'" class="listado">
      <ion-item-group style="text-align: right;">
        <ion-button color="light" style="width: auto; height: 45px; padding-bottom: 10px;">
          <ion-icon name="add-outline"></ion-icon>
          <b>Crear playlist</b>
        </ion-button>

        <ion-button color="light" style="width: auto; height: 45px; padding-bottom: 10px;">
          <ion-icon name="add-outline"></ion-icon>
          <b>Crear carpeta</b>
        </ion-button>
      </ion-item-group>

      <ion-grid>
        <ion-row style="font-size: large;">
          <ion-col>Nombre</ion-col>
          <ion-col>Duración</ion-col>
          <ion-col>Fecha</ion-col>
        </ion-row>
        <ion-row style="margin: 20px; align-items: center;">
          <ion-item button (click)="openFavoritas('Favoritas', false, ['../../../assets/albumes/Favs_cover.jpg'])" cass="item-playlist">
          <ion-col>
            <div class="img-playlist">
              <img src="../../../assets/albumes/Favs_cover.jpg"/>
            </div>
          </ion-col>
          <ion-col>Favoritas</ion-col>
        </ion-item>
        </ion-row>
        <div expand="full">
          <ion-spinner *ngIf="showSpinner"></ion-spinner>
          <ion-item *ngIf="showError">{{ mensajeError }}</ion-item>
        </div>
        <ion-row *ngFor="let playlist of playlists | async | keyvalue" style="margin: 20px; align-items: center;">
          <ion-item button (click)="openPlaylist(playlist.key, playlist.value.Privado, playlist.value.Fotos)"
            class="item-playlist">
            <ion-col *ngIf="playlist.value.Fotos.length == 0">
              <div class="img-playlist">
                <img src="../../../assets/albumes/defaultCover.png" />
              </div>
            </ion-col>
            <ion-col *ngIf="playlist.value.Fotos.length > 0">
              <div class="img-playlist">
                <img src="{{ playlist.value.Fotos[0] }}" />
              </div>
            </ion-col>
            <ion-col>{{ playlist.key }}</ion-col>
          </ion-item>
        </ion-row>
      </ion-grid>

    </ion-item-group>


    <ion-content *ngIf="currentTabMusica == 'Artistas'">
      <ion-grid>
        <div expand="full">
          <ion-spinner *ngIf="showSpinner"></ion-spinner>
          <ion-item *ngIf="showError">{{ mensajeError }}</ion-item>
        </div>
        <ion-row *ngFor="let artista of artistas | async | keyvalue" >
          <ion-item button (click)="openArtist(artista.key, artista.value)">
            <ion-col>
              <img src="{{ artista.value }}" class="img-artista" />
            </ion-col>
            <ion-col>
              {{ artista.key }}
            </ion-col>
          </ion-item>
        </ion-row>
      </ion-grid>
    </ion-content>

    <ion-content *ngIf="currentTabMusica == 'Albumes'">
      <ion-grid>
        <div expand="full">
          <ion-spinner *ngIf="showSpinner"></ion-spinner>
          <ion-item *ngIf="showError">{{ mensajeError }}</ion-item>
        </div>
        <ion-row>
          <ion-col>Nombre</ion-col>
          <ion-col>Artista</ion-col>
          <ion-col>Duración</ion-col>
          <ion-col>Fecha</ion-col>
        </ion-row>
        <ion-row *ngFor="let album of albumes | async | keyvalue">
          <ion-item button (click)="openAlbum(album.key, album.value)" class="item-album">
            <!--NO SE POR QUÉ FALLA [color]="cancion.key == rs.activeTrack?.nombre ? 'playstack shade' : 'white'"-->
            <ion-col><img src="{{ album.value }}" class="img-album" /></ion-col>
            <ion-col>{{ album.key }}</ion-col>
            <!-- Falta la duracion en el servicio <ion-col>{{ cancion.value.duracion}}</ion-col>-->
            <!-- Falta la fecha en el servicio <ion-col>{{ cancion.value.fecha}}</ion-col>-->
          </ion-item>
        </ion-row>
      </ion-grid>
    </ion-content>
  </ion-content>




  <!-- Pestañas podasts -->

  <ion-content *ngIf="currentTab == 'Podcasts'">
    <ion-toolbar>
      <ion-segment color="light" [value]="currentTabPodcasts">
        <ion-segment-button value="Episodios" (click)="setEpisodios()">
          Episodios
        </ion-segment-button>
        <ion-segment-button value="Programas" (click)="setProgramas()">
          Programas
        </ion-segment-button>
      </ion-segment>
    </ion-toolbar>

    <!-- Falta por hacer acceso a BD-->
    <ion-content *ngIf="currentTabPodcasts == 'Episodios'">
      Sin escuchar:
      <ion-grid>
        <div expand="full">
          <ion-spinner *ngIf="showSpinner"></ion-spinner>
          <ion-item *ngIf="showError">{{ mensajeError }}</ion-item>
        </div>
        <ion-row style="font-size: large;">
          <ion-col>Nº capítulo</ion-col>
          <ion-col>Nombre</ion-col>
          <ion-col size="3">Fecha</ion-col>
        </ion-row>
        <ion-row *ngFor="let programa of podcasts | async | keyvalue">
          <ion-item button class="item-album">
            <!--NO SE POR QUÉ FALLA [color]="cancion.key == rs.activeTrack?.nombre ? 'playstack shade' : 'white'"-->
            <ion-col size="1">{{ programa.key }}</ion-col>
            <ion-col>
              {{ programa.value.nombre }}
            </ion-col>
            <ion-col size="3">{{ programa.value.fecha.substring(0,10) }}</ion-col>
          </ion-item>
        </ion-row>
      </ion-grid>
    </ion-content>

    <ion-content *ngIf="currentTabPodcasts == 'Programas'">
      Podcasts que sigues:
      <ion-grid>
        <div expand="full">
          <ion-spinner *ngIf="showSpinner"></ion-spinner>
          <ion-item *ngIf="showError">{{ mensajeError }}</ion-item>
        </div>
        <ion-row style="font-size: large;">
          <ion-col>Nombre</ion-col>
          <ion-col>Presentación</ion-col>
          <ion-col>Duración</ion-col>
        </ion-row>
        <ion-row *ngFor="let programa of podcasts | async | keyvalue">
          <ion-item button class="item-album" (click)="openPodcast(programa)">
            <!--NO SE POR QUÉ FALLA [color]="cancion.key == rs.activeTrack?.nombre ? 'playstack shade' : 'white'"-->
            <ion-col><img src="{{ programa.value.Foto }}" class="img-album" /></ion-col>
            <ion-col color="light">{{ programa.key }}</ion-col>
            {{ programa.value.Idioma }}
            {{ mostrarInterlocutores(programa.value.Interlocutores) }}
            <!-- Falta la duracion en el servicio <ion-col>{{ cancion.value.duracion}}</ion-col>-->
            <!-- Falta la fecha en el servicio <ion-col>{{ cancion.value.fecha}}</ion-col>-->
          </ion-item>
        </ion-row>
      </ion-grid>
    </ion-content>

  </ion-content>





</ion-content>

<ion-footer>
  <app-reproductor></app-reproductor>
</ion-footer>